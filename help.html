<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RGLR GNRTR - Complete Help Guide</title>
    <link rel="stylesheet" href="tailwind.css">
    <!-- Include the HelpSidebar component inline -->
    <script>
        // HelpSidebar component - inline version for HTML compatibility
        class HelpSidebar {
            constructor(currentPage, sections = []) {
                this.currentPage = currentPage;
                this.sections = sections;
                this.sidebar = null;
            }

            generate() {
                const helpPages = [
                    { name: 'Main Help', url: 'help.html', icon: '🎵' },
                    { name: 'General Setup', url: 'help-general-setup.html', icon: '🔧' },
                    { name: 'Parameters', url: 'help-parameters.html', icon: '📊' },
                    { name: 'Animations', url: 'help-animations.html', icon: '🎬' },
                    { name: 'Presets & Scenes', url: 'help-presets-scenes.html', icon: '💾' },
                    { name: 'P5 Layer', url: 'help-p5-layer.html', icon: '🎨' }
                ];

                let sidebarHTML = `
                    <div class="help-sidebar">
                        <div class="nav-section">
                            <div class="nav-section-title">📚 Help Pages</div>
                            ${helpPages.map(page => {
                                const isActive = this.currentPage === page.url;
                                return `
                                    <a href="${page.url}" class="nav-item ${isActive ? 'active' : ''}" target="_blank">
                                        ${page.icon} ${page.name}
                                    </a>
                                `;
                            }).join('')}
                        </div>
                `;

                if (this.sections.length > 0) {
                    sidebarHTML += `
                        <div class="nav-section">
                            <div class="nav-section-title">📖 Page Sections</div>
                            ${this.sections.map(section => {
                                return `
                                    <a href="#${section.id}" class="nav-item">
                                        ${section.title}
                                    </a>
                                `;
                            }).join('')}
                        </div>
                    `;
                }

                sidebarHTML += '</div>';
                return sidebarHTML;
            }

            init() {
                // Add smooth scrolling for anchor links
                const anchorLinks = document.querySelectorAll('.nav-item[href^="#"]');
                anchorLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = link.getAttribute('href').substring(1);
                        const targetElement = document.getElementById(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ 
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });
            }
        }
    </script>
    <style>
        /* Only essential layout styles not in main CSS */
        .help-layout {
            display: flex;
            gap: 16px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .help-sidebar {
            width: 280px;
            background: var(--color-bg-overlay);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            backdrop-filter: blur(10px);
            border: 1px solid var(--color-border-primary);
            height: 100vh;
            position: sticky;
            top: 20px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .help-main-content {
            flex: 1;
            background: var(--color-bg-overlay);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            backdrop-filter: blur(10px);
            border: 1px solid var(--color-border-primary);
        }

        .nav-section {
            margin-bottom: var(--spacing-xl);
        }

        .nav-section-title {
            color: var(--color-primary);
            font-weight: 600;
            font-size: var(--text-lg);
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--color-primary);
        }

        .nav-item {
            display: block;
            padding: var(--spacing-sm) var(--spacing-md);
            margin: var(--spacing-xs) 0;
            color: var(--color-text-primary);
            text-decoration: none;
            border-radius: var(--radius-md);
            transition: all 0.3s ease;
            font-size: var(--text-sm);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--color-primary);
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.3);
            color: var(--color-primary);
            font-weight: 600;
        }

        .help-card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .help-card {
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border-secondary);
            border-radius: var(--radius-lg);
            padding: 25px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .help-card:hover {
            border-color: var(--color-primary);
            background: var(--color-bg-tertiary);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.15);
        }

        /* Responsive design */
        @media (max-width: 1024px) {
            .help-layout {
                flex-direction: column;
            }

            .help-sidebar {
                width: 100%;
                position: static;
                height: auto;
            }
        }
    </style>
</head>

<body class="help-body">
    <div class="help-container">
        <div class="help-layout">
            <!-- Sidebar Navigation - Generated by HelpSidebar component -->
            <div id="help-sidebar-container"></div>

            <!-- Main Content -->
            <div class="help-main-content">
                <h1 class="help-h1">🎵 RGLR GNRTR - Complete Help Guide</h1>
                <p style="font-size: 16px; color: #ccc; margin-bottom: 30px;">
                    Welcome to the comprehensive documentation for RGLR GNRTR, a powerful real-time visual generator designed for live performance and creative expression. This guide covers everything from basic setup to advanced techniques.
                </p>

                <!-- Quick Start Section -->
                <div id="quick-start" class="quick-start">
                    <h3>⚡ Quick Start - Get Creating in 5 Minutes</h3>
                    <ol style="color: #ccc; line-height: 1.6;">
                        <li><strong>Connect MIDI:</strong> Plug in your MIDI controller and click "Connect MIDI"</li>
                        <li><strong>Load a Preset:</strong> Try "Essential Controls" for basic MIDI mappings</li>
                        <li><strong>Load a Scene:</strong> Start with "RGLR Mode" for the classic aesthetic</li>
                        <li><strong>Test Controls:</strong> Move knobs and see the visuals respond</li>
                        <li><strong>Start Creating:</strong> Experiment with different parameters and scenes!</li>
                    </ol>
                    <p style="margin-top: 15px; font-size: 14px; color: #888;">
                        Need help with setup? Check the <a href="help-general-setup.html" style="color: var(--color-primary);">General Setup Guide</a> for detailed instructions.
                    </p>
                </div>

                <!-- Help Cards Grid -->
                <div class="help-card-grid">
                    <!-- General Setup Card -->
                    <div class="help-card" onclick="window.open('help-general-setup.html', '_blank')">
                        <h3>🔧 General Setup Guide</h3>
                        <p>Essential setup instructions for MIDI controllers, audio input, and browser requirements. Start here if you're new to the system.</p>
                        <div class="help-card-features">
                            <ul>
                                <li>MIDI controller setup and connection</li>
                                <li>Audio input configuration</li>
                                <li>MIDI Learn functionality</li>
                                <li>MIDI Clock synchronization</li>
                                <li>Troubleshooting common issues</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Parameters Reference Card -->
                    <div class="help-card" onclick="window.open('help-parameters.html', '_blank')">
                        <h3>📊 Parameters Reference</h3>
                        <p>Complete reference for every parameter available for MIDI and audio mapping. Includes ranges, descriptions, and performance tips.</p>
                        <div class="help-card-features">
                            <ul>
                                <li>Grid and composition parameters</li>
                                <li>Animation controls (movement, rotation, scale)</li>
                                <li>Material and lighting parameters</li>
                                <li>Post-processing effects</li>
                                <li>Layer-specific parameters</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Animation Types Card -->
                    <div class="help-card" onclick="window.open('help-animations.html', '_blank')">
                        <h3>🎬 Animation Types & Systems</h3>
                        <p>Deep dive into the animation system, musical timing, and how to create compelling visual movement synchronized to your music.</p>
                        <div class="help-card-features">
                            <ul>
                                <li>Musical timing and BPM synchronization</li>
                                <li>Movement, rotation, and scale animations</li>
                                <li>Shape cycling and morphing systems</li>
                                <li>3D center scaling effects</li>
                                <li>Combining multiple animations</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Presets & Scenes Card -->
                    <div class="help-card" onclick="window.open('help-presets-scenes.html', '_blank')">
                        <h3>💾 Presets & Scenes Guide</h3>
                        <p>Learn to use and create presets and scenes for efficient workflow and consistent visual configurations across performances.</p>
                        <div class="help-card-features">
                            <ul>
                                <li>Understanding presets vs scenes</li>
                                <li>Available preset and scene library</li>
                                <li>Creating custom configurations</li>
                                <li>Live performance workflows</li>
                                <li>File management and organization</li>
                            </ul>
                        </div>
                    </div>

                    <!-- P5 Layer Card -->
                    <div class="help-card" onclick="window.open('help-p5-layer.html', '_blank')">
                        <h3>🎨 P5 Layer Guide</h3>
                        <p>Comprehensive guide to the P5.js layer system, including how to write custom sketches and expose parameters for MIDI control.</p>
                        <div class="help-card-features">
                            <ul>
                                <li>P5.js sketch development</li>
                                <li>Parameter exposure with p5Param()</li>
                                <li>MIDI mapping to P5 parameters</li>
                                <li>Code examples and templates</li>
                                <li>Best practices and optimization</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Coming Soon Card -->
                    <div class="help-card" style="opacity: 0.6; cursor: default;" onclick="">
                        <h3>🚧 More Layer Guides</h3>
                        <p>Additional layer documentation is coming soon as new layer types are implemented.</p>
                        <div class="help-card-features">
                            <ul>
                                <li>Shader Layer Guide (Coming Soon)</li>
                                <li>Video Layer Guide (Coming Soon)</li>
                                <li>Particle Layer Guide (Coming Soon)</li>
                                <li>Image Layer Guide (Coming Soon)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- System Overview Section -->
                <div id="overview" class="help-section">
                    <h2 class="help-h2">📖 System Overview</h2>
                    <p>RGLR GNRTR is a browser-based real-time visual generator designed for live performance, music visualization, and creative expression. The system features a modular architecture with multiple layers, comprehensive MIDI control, and audio-reactive capabilities.</p>

                    <h3 class="help-h3">🏗️ Core Architecture</h3>
                    <ul>
                        <li><strong>Multi-Layer System:</strong> Composable visual layers (P5.js, Shader, Video, Particle)</li>
                        <li><strong>MIDI Integration:</strong> Complete MIDI controller support with learning and mapping</li>
                        <li><strong>Audio Analysis:</strong> Real-time frequency analysis for audio-reactive visuals</li>
                        <li><strong>Musical Timing:</strong> BPM-synchronized animations with MIDI clock support</li>
                        <li><strong>Preset System:</strong> Save and load parameter configurations and complete scenes</li>
                    </ul>

                    <h3 class="help-h3">🎛️ Control Methods</h3>
                    <ul>
                        <li><strong>MIDI Controllers:</strong> Hardware knobs, faders, and buttons</li>
                        <li><strong>Audio Input:</strong> Microphone or line input for audio-reactive control</li>
                        <li><strong>GUI Controls:</strong> On-screen sliders and controls</li>
                        <li><strong>Keyboard Shortcuts:</strong> Quick access to common functions</li>
                        <li><strong>Automation:</strong> Time-based and musical timing automation</li>
                    </ul>

                    <h3 class="help-h3">🎨 Visual Capabilities</h3>
                    <ul>
                        <li><strong>3D Rendering:</strong> WebGL-based 3D graphics with lighting and materials</li>
                        <li><strong>Shape Generation:</strong> Procedural geometric shapes with morphing</li>
                        <li><strong>Post-Processing:</strong> Bloom, chromatic aberration, vignette, film grain</li>
                        <li><strong>Color Grading:</strong> HSB color control with real-time adjustment</li>
                        <li><strong>Custom Shaders:</strong> GLSL shader support for advanced effects</li>
                    </ul>
                </div>

                <!-- Layer System Overview -->
                <div id="layers-overview" class="help-section">
                    <h2 class="help-h2">🎭 Multi-Layer Visual System</h2>
                    <p>The layer system allows you to combine different types of visual content, creating rich, complex compositions from multiple sources.</p>

                    <h3 class="help-h3">Available Layer Types</h3>
                    <ul>
                        <li><strong>🎨 P5 Layer:</strong> Custom p5.js sketches with parameter exposure</li>
                        <li><strong>🔺 Shader Layer:</strong> Custom GLSL shaders (Coming Soon)</li>
                        <li><strong>🎬 Video Layer:</strong> Video playback with effects (Coming Soon)</li>
                        <li><strong>✨ Particle Layer:</strong> GPU-accelerated particle systems (Coming Soon)</li>
                        <li><strong>🖼️ Image Layer:</strong> Static and animated images (Coming Soon)</li>
                    </ul>

                    <h3 class="help-h3">Layer MIDI Control</h3>
                    <p>Each layer can expose its own parameters for MIDI control. The dual-dropdown system allows one MIDI input to control both:</p>
                    <ul>
                        <li><strong>Primary Target:</strong> Main grid/animation parameters</li>
                        <li><strong>Layer Target:</strong> Layer-specific parameters (e.g., P5 sketch parameters)</li>
                    </ul>

                    <h3 class="help-h3">Using the Layer Panel</h3>
                    <ol>
                        <li><strong>Open Layer Panel:</strong> Click the layers icon in the left sidebar</li>
                        <li><strong>Add Layers:</strong> Click "Add Layer" and choose the layer type</li>
                        <li><strong>Configure Layers:</strong> Set up layer-specific parameters</li>
                        <li><strong>Arrange Layers:</strong> Drag to reorder layer stacking</li>
                        <li><strong>Blend Modes:</strong> Choose how layers composite together</li>
                    </ol>

                    <div class="help-note">
                        <strong>P5 Layer Quick Start:</strong> Check out the <a href="help-p5-layer.html" style="color: var(--color-primary);">P5 Layer Guide</a> for detailed instructions on creating custom p5.js sketches and exposing parameters for MIDI control.
                    </div>
                </div>

                <!-- Performance Tips Section -->
                <div id="performance-tips" class="help-section">
                    <h2 class="help-h2">⚡ Performance Optimization</h2>
                    <p>Tips for maintaining smooth 60fps performance during live shows.</p>

                    <h3 class="help-h3">Hardware Recommendations</h3>
                    <ul>
                        <li><strong>Graphics:</strong> Dedicated GPU recommended for complex scenes</li>
                        <li><strong>RAM:</strong> 8GB+ for large grid sizes and multiple layers</li>
                        <li><strong>CPU:</strong> Modern multi-core processor for audio analysis</li>
                        <li><strong>Browser:</strong> Chrome or Edge for best WebGL performance</li>
                    </ul>

                    <h3 class="help-h3">Performance Settings</h3>
                    <ul>
                        <li><strong>Grid Size:</strong> Keep total shapes under 400 (20×20) for smooth performance</li>
                        <li><strong>Post-Processing:</strong> Reduce bloom intensity if frame rate drops</li>
                        <li><strong>Layer Count:</strong> Limit active layers based on system capabilities</li>
                        <li><strong>Animation Speed:</strong> Avoid very fast divisions (32nd notes) when possible</li>
                    </ul>
                </div>

                <!-- Troubleshooting Section -->
                <div id="troubleshooting" class="help-section">
                    <h2 class="help-h2">🔧 Common Troubleshooting</h2>
                    <p>Solutions for frequently encountered issues.</p>

                    <div class="help-warning">
                        <strong>MIDI Not Working:</strong>
                        <ul>
                            <li>Ensure you're using HTTPS or localhost</li>
                            <li>Check MIDI controller is connected and powered on</li>
                            <li>Try refreshing the page and reconnecting MIDI</li>
                            <li>Use Chrome or Edge for best MIDI support</li>
                        </ul>
                    </div>

                    <div class="help-warning">
                        <strong>Poor Performance:</strong>
                        <ul>
                            <li>Reduce grid size (gridWidth × gridHeight)</li>
                            <li>Lower post-processing effect intensities</li>
                            <li>Close other browser tabs and applications</li>
                            <li>Check if hardware acceleration is enabled</li>
                        </ul>
                    </div>

                    <div class="help-warning">
                        <strong>Audio Not Responsive:</strong>
                        <ul>
                            <li>Grant microphone permissions when prompted</li>
                            <li>Check audio input device selection</li>
                            <li>Verify audio levels in your system settings</li>
                            <li>Try different audio input sources</li>
                        </ul>
                    </div>
                </div>

                <!-- Workflow Tips Section -->
                <div id="workflow-tips" class="help-section">
                    <h2 class="help-h2">💡 Workflow Tips</h2>
                    <p>Best practices for efficient creative workflow and live performance.</p>

                    <h3 class="help-h3">🎭 Live Performance Workflow</h3>
                    <ol>
                        <li><strong>Pre-Show Setup:</strong> Test all MIDI controllers and load essential presets</li>
                        <li><strong>Scene Planning:</strong> Choose scenes that match your musical progression</li>
                        <li><strong>Progressive Loading:</strong> Start simple, add complexity during builds</li>
                        <li><strong>Contrast Usage:</strong> Alternate between different visual styles</li>
                        <li><strong>Backup Plans:</strong> Have fallback scenes ready for technical issues</li>
                    </ol>

                    <h3 class="help-h3">🎨 Creative Development</h3>
                    <ul>
                        <li><strong>Start with Presets:</strong> Use existing presets as creative starting points</li>
                        <li><strong>Experiment Freely:</strong> Try unexpected parameter combinations</li>
                        <li><strong>Save Discoveries:</strong> Immediately save interesting configurations</li>
                        <li><strong>Document Everything:</strong> Add descriptions to your presets and scenes</li>
                        <li><strong>Test with Music:</strong> Always test configurations with actual musical content</li>
                    </ul>

                    <h3 class="help-h3">🗂️ Organization</h3>
                    <ul>
                        <li><strong>Consistent Naming:</strong> Use descriptive names for presets and scenes</li>
                        <li><strong>Version Control:</strong> Number versions of evolving configurations</li>
                        <li><strong>Regular Backups:</strong> Export and backup your preset/scene libraries</li>
                        <li><strong>Performance Testing:</strong> Test new configurations under performance conditions</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize the HelpSidebar component
        document.addEventListener('DOMContentLoaded', function() {
            // Define the sections for this page
            const pageSections = [
                { id: 'quick-start', title: '⚡ Quick Start' },
                { id: 'overview', title: '📖 System Overview' },
                { id: 'layers-overview', title: '🎭 Layer System Overview' },
                { id: 'performance-tips', title: '⚡ Performance Optimization' },
                { id: 'troubleshooting', title: '🔧 Troubleshooting' },
                { id: 'workflow-tips', title: '💡 Workflow Tips' }
            ];

            // Create and initialize the sidebar
            const sidebar = new HelpSidebar('help.html', pageSections);
            document.getElementById('help-sidebar-container').innerHTML = sidebar.generate();
            sidebar.init();
        });
    </script>
</body>
</html>